<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Title - Ideal ter até 60 caracteres -->
    <title>Contato - Simplicity</title>
    
    <!-- Inserindo Favicon -->
    <link rel="shortcut icon" href="imagens/favicon.png" type="image/x-icon">

    <!-- Inserindo tags meta descrição. Ideal até 160 Caracteres -->
    
    <meta name="description" content="Entre em contato com nossos consultores">
    <meta name="keywords" content="serviços, criação de sites, design para web">
    
    <!-- CSS externo -->
    <link rel="stylesheet" href="css/estilo.css">



</head>
<body>
    <header>
        <div class="limitador">
            <h1><a href="">Simplicity</a></h1>
            <nav>
                <h2>
                    <a href="" class="icone">Menu &equiv; </a>
                </h2>
                <ul class="menu">
                    <li><a href="index.html" title="página">Home</a></li>
                    <li><a href="produtos.html" title="conheça nossos produtos">Produtos</a></li>
                    <li><a href="servicos.html" title="da criação de site a lija vistual, conheça nossos serviços">Serviços</a></li>
                    <li><a href="contato.html" title="fale com a equipe Simplicity">Contato</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Início do conteúdo -->
    <main>
        <article class="limitador conteudo">
            <h2>Contato</h2>
            <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Cumque aut debitis, incidunt eius eos, in velit, non id molestiae facilis suscipit quo quam commodi? Praesentium iusto esse delectus voluptas magni. Lorem ipsum.?</p> 
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolores tenetur rerum quos ad consectetur voluptates nesciunt doloremque dicta, quasi rem magni. Minus qui sequi explicabo, odio asperiores eaque. Molestias.</p>
            <form action="https://formspree.io/f/moqyrkav" id="my-form" method="POST">
                <div>
                    <label for="nome">Nome:
                    </label>
                    <input type="text" name="nome" id="nome" placeholder="Nome completo" required>
                </div>
                <div>
                    <label for="email">Email:</label>
                    <input type="email" name="email" id="email" placeholder="E-mail" required>
                </div>
                <div>
                    <label for="data">Data de nascimento:</label>
                    <input type="date" name="data" id="data">
                </div>
                <div>
                    <label for="telefone">Telefone:</label>
                    <input type="tel" name="telefone" id="telefone" placeholder="Digite apenas números, incluindo DDD">
                </div>
                <div>
                    <label for="documento">Documento:</label>
                    <input type="tel" name="documento" id="documento" placeholder="Digite o CPF ou CNPJ">
                </div>
                <div>
                    <label for="idade">Idade:</label>
                    <input type="number" name="idade" id="idade" min="18" max="120">
                </div>
                <div>
                    <label for="sexo">Sexo:</label>
                    <input type="radio" name="sexo" id="masculino" value="masculino">
                    <label for="masculino">Masculino</label>
                    <input type="radio" name="sexo" id="feminino" value="feminino">
                    <label for="feminino">Feminino</label>
                </div>
                <div>
                    <p>Interesses:</p>
                    <input type="checkbox" name="interesses" id="design" value="design">
                    <label for="design">Design</label>
                    <input type="checkbox" name="interesses" id="marketing" value="marketing">
                    <label for="marketing">Marketing</label>
                    <input type="checkbox" name="interesses" id="programacao" value="programacao">
                    <label for="programacao">Programação</label>
                </div>
                <div>
                    <label for="cep">CEP:</label>
                    <input type="text" id="cep" name="cep" maxlength="9">
                    <!-- <button id="localizar-cep">Localizar</button> -->
                    <b id="status"></b>
                </div>
                <div>
                    <label for="endereco">Endereço:</label>
                    <input type="text" name="endereco" id="endereco" size="30">

                </div>
                <div>
                    <label for="bairro">Bairro</label>
                    <input type="text" name="bairro" id="bairro">
                </div>
                <div>
                    <label for="cidade">Cidade</label>
                    <input type="text" name="cidade" id="cidade">
                </div>
                <div>
                    <label for="estado">Estado:</label>
                    <input type="text" name="estado" id="estado">
                </div>
                <div>
                    <label for="assunto">Assunto</label>
                    <select name="assunto" id="assunto">
                        <option value="">Escolha uma opção.</option>
                        <option value="">Dúvidas</option>
                        <option value="">Elogios</option>
                        <option value="">Reclamações</option>
                        <option value="">Outro</option>
                    </select>
                </div>
                <div>
                    <label for="mensagem">Mensagem:
                        <span id="maximo"> (restam <b id="caracteres">100</b> caracteres) </span>
                    </label><br>
                    <textarea name="mensagem" id="mensagem" cols="30" rows="10" maxlength="100"></textarea>
                </div>
                <button type="submit" id="my-form-button">Enviar Dados</button>
                <p id="my-form-status"></p>
            </form>
        </article>
    </main>
    <!-- Fim do conteúdo -->

    <!-- Rodapé -->
    <footer>
        <p>Simplicity é um site fictício desenvolvido por Lucas<br> Penha &copy; 2021</p>
    </footer>
    <script src="js/codigo.js"></script>
    <!-- Linkando para o Vanilla Masker -->
    <script src="js/vanilla-masker.min.js"></script>
        <!-- Mascarando campo de telefone -->
    <script>

        VMasker(document.querySelector("#cep")).maskPattern("99999-999"); 
    
        function inputHandler(masks, max, event) {
        var c = event.target;
        var v = c.value.replace(/\D/g, '');
        var m = c.value.length > max ? 1 : 0;
        VMasker(c).unMask();
        VMasker(c).maskPattern(masks[m]);
        c.value = VMasker.toPattern(v, masks[m]);
        }

        var telMask = ['(99) 9999-99999', '(99) 99999-9999'];
        var tel = document.querySelector('#telefone');
        VMasker(tel).maskPattern(telMask[0]);
        tel.addEventListener('input', inputHandler.bind(undefined, telMask, 14), false);

        var docMask = ['999.999.999-999', '99.999.999/9999-99'];
        var doc = document.querySelector('#documento');
        VMasker(doc).maskPattern(docMask[0]);
        doc.addEventListener('input', inputHandler.bind(undefined, docMask, 14), false);

    </script>
        <!-- Utilizando o Webservice VIACEP https://viacep.com.br para preencher o formulário a partir do cep fornecido -->
        <!-- referenciando biblioteca Jquery 3.6.0 
        IMPORTANTE: Sempre que carregar um plug-in JQuery, é necessário primeiro realizar a chamada da biblioteca para depois fazer a chamada do plug-in-->
    <script src="plugins/jquery-3.6.0.min.js"></script>
    <script>

        $(document).ready(function() {

            function limpa_formulário_cep() {
                // Limpa valores do formulário de cep.
                $("#endereco").val("");
                $("#bairro").val("");
                $("#cidade").val("");
                $("#estado").val("");
            }
            
            //Quando o campo cep perde o foco.
            $("#cep").blur(function() {

                //Nova variável "cep" somente com dígitos.
                var cep = $(this).val().replace(/\D/g, '');

                //Verifica se campo cep possui valor informado.
                if (cep != "") {

                    //Expressão regular para validar o CEP.
                    var validacep = /^[0-9]{8}$/;

                    //Valida o formato do CEP.
                    if(validacep.test(cep)) {

                        //Preenche os campos com "..." enquanto consulta webservice.
                        $("#endereco").val("...");
                        $("#bairro").val("...");
                        $("#cidade").val("...");
                        $("#estado").val("...");

                        //Consulta o webservice viacep.com.br/
                        $.getJSON("https://viacep.com.br/ws/"+ cep +"/json/?callback=?", function(dados) {

                            if (!("erro" in dados)) {
                                //Atualiza os campos com os valores da consulta.
                                $("#endereco").val(dados.logradouro);
                                $("#bairro").val(dados.bairro);
                                $("#cidade").val(dados.localidade);
                                $("#estado").val(dados.uf);
                                $("#status").text("");

                            } //end if.
                            else {
                                //CEP pesquisado não foi encontrado.
                                limpa_formulário_cep();
                                $("#status").text("CEP não encontrado.").css('color', 'orange');
                            }
                        });
                    } //end if.
                    else {
                        //cep é inválido.
                        limpa_formulário_cep();
                        $("#status").text("Formato de CEP inválido.").css('color', 'red');
                    }
                } //end if.
                else {
                    //cep sem valor, limpa formulário.
                    limpa_formulário_cep();
                }
            });
        });

    </script>

    <!-- Contador de caracteres do campo de mensagem do formulário -->
    <script>
        const spanMaximo = $("#maximo");
        const bCaracteres = $("#caracteres");
        const textMensagem = $("#mensagem");

        let quantidade = 100;

        textMensagem.on("input", function(){
            
            //capturando o que for digitado
            let conteudo = textMensagem.val();
            
            // console.log(conteudo);
            // criando contagem regressiva
            let contagem = quantidade - conteudo.length;

            $('#caracteres').text(contagem);
            if(contagem == 0){
                spanMaximo.css('color' , 'red')
                spanMaximo.text("Limite de caracteres excedido");
            }
            
            else if(contagem <=20){
                spanMaximo.css('color' , 'orange');
                spanMaximo.html(`(restam <b id="caracteres"> ${contagem}</b> caracteres)`) ;
            }
                        
            else{
                spanMaximo.css('color', 'black')
            }
        })
    </script>

<script>
    var form = document.getElementById("my-form");
    
    async function handleSubmit(event) {
      event.preventDefault();
      var status = document.getElementById("my-form-status");
      var data = new FormData(event.target);
      fetch(event.target.action, {
        method: form.method,
        body: data,
        headers: {
            'Accept': 'application/json'
        }
      }).then(response => {
        status.innerHTML = "Thanks for your submission!";
        form.reset()
      }).catch(error => {
        status.innerHTML = "Oops! revise as informações"
      });
    }
    form.addEventListener("submit", handleSubmit)
</script>

</body>
</html>